<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Guess Number</title>
  </head>
  <body>
    <h1>Угадай число</h1>
    <p>Загадано число от 1 до 10.</p>
    <p>Дается 5 попыток, чтобы отгадать.</p>

    <div>
      <button onclick="guessNum(1)">1</button>
      <button onclick="guessNum(2)">2</button>
      <button onclick="guessNum(3)">3</button>
      <button onclick="guessNum(4)">4</button>
      <button onclick="guessNum(5)">5</button>
      <button onclick="guessNum(6)">6</button>
      <button onclick="guessNum(7)">7</button>
      <button onclick="guessNum(8)">8</button>
      <button onclick="guessNum(9)">9</button>
      <button onclick="guessNum(10)">10</button>
    </div>

    <script>
      function plural(value, variants = {}, locale = "ru-RU") {
        const key = new Intl.PluralRules(locale).select(value);
        return variants[key] || "";
      }

      const MAX_TRIES = 5;
      const secretNum = Math.ceil(Math.random() * 10);
      let tries = 0;

      const win = () => alert("Вы угадали! :)");
      const loose = () => alert("Вы проиграли! :(");
      const tryFn = () => {
        tries += 1;

        if (tries === MAX_TRIES) return loose();
        const currentTry = MAX_TRIES - tries;
        return alert(
          `Не угадали! Осталось ${currentTry} ${plural(currentTry, {
            one: "попытка",
            few: "попытки",
            many: "попыток",
          })}`
        );
      };

      function guessNum(num) {
        return num === secretNum ? win() : tryFn();
      }
    </script>
  </body>
</html>
